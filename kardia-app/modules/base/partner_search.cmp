$Version=2$
partner_search_component "widget/component-decl"
    {
    width=700;height=440;
    sync_osrc "widget/parameter"
        {
        //This osrc is a parameter passed in from the outside
        type=object;
        find_container="widget/osrc";
        }
    sync_form "widget/parameter"
        {
        //This osrc is a parameter passed in from the outside
        type=object;
        find_container="widget/form";
        }

    PartnerSelected "widget/component-decl-event" {  }
    CloseMe "widget/component-decl-event" {  }

    OpenForms "widget/component-decl-action" {  }

    person_search_osrc "widget/osrc"
        {
        sql="SELECT :l:p_address_3, :l:p_address_2, :l:p_location_type, :l:p_country_code, :l:p_partner_key, :l:p_address_1, :l:p_postal_code, :l:p_state_province, :l:p_in_care_of, :l:p_city, :l:p_location_id, :p:p_partner_key, :p:p_partner_class, :p:p_title, :p:p_given_name, :p:p_preferred_name, :p:p_surname, :p:p_org_name, :p:p_comments,  :p:p_legacy_key_1, :p:p_legacy_key_2 FROM /apps/kardia/data/Kardia_DB/p_partner/rows p, /apps/kardia/data/Kardia_DB/p_location/rows l WHERE :p:p_partner_key = :l:p_partner_key";
        baseobj = "/apps/kardia/data/Kardia_DB/p_partner/rows";
        replicasize=10;
        readahead=10;
        autoquery=never;

        partner_search_form "widget/form"
            {
            p_partner_ctl "widget/component"
                {
                x=0;y=0;width=698;height=24;
                path="/sys/cmp/form_controls.cmp";
		deletable=0;
                }

            main_pane "widget/pane"
                {
		style=flat;
                width=700;height=279;
                x=0;y=29;

                first_vbox "widget/vbox"
                    {
                    width=415;height=273;
                    column_width=410;
                    cellsize=20; spacing=5;
                    x=0;y=1;
                    p_given_name_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_given_name; text="First Name"; lookup_width=325; ctl_type="editbox"; tooltip="The first (Given) name of the partner"; }
                    p_preferred_name_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_preferred_name; text="Preferred Name"; lookup_width=325; ctl_type="editbox"; tooltip="Preferred name (nickname, etc) of the partner"; }
                    p_surname_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_surname; text="Last Name"; lookup_width=325; ctl_type="editbox"; tooltip="The last Name (Surname) of the partner"; }
                    p_org_name_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_org_name; text="Organization"; lookup_width=325; ctl_type="editbox"; tooltip="The name of the organization"; }
                    p_in_care_of_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_in_care_of; text="In-care-of"; lookup_width=325; ctl_type="editbox"; tooltip="In Care Of"; }
                    p_address_1_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_address_1; text="Address Line 1"; lookup_width=325; ctl_type="editbox"; tooltip="First Address"; }
                    p_address_2_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_address_2; text="Address Line 2"; lookup_width=325; ctl_type="editbox"; tooltip="Second Address"; }
                    p_address_3_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_address_3; text="Address Line 3"; lookup_width=325; ctl_type="editbox"; tooltip="Third Address field for when address 1 and address2 are filled"; }
                    p_comments_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_comments; text="Comments"; lookup_width=305; ctl_type="editbox"; tooltip=""; }
                    }
                second_vbox "widget/vbox"
                    {
                    width=698;height=45;
                    column_width=200;
                    cellsize=20; spacing=5;
                    x=3;y=226;
                    p_city_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_city; text="City"; lookup_width=305; ctl_type="editbox"; tooltip="The city or township"; }
                    p_state_province_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_state_province; text="State/Province"; lookup_width=305; ctl_type="editbox"; tooltip="Use country-keyed ref tbl 4 state/prov/county"; }
                    p_postal_code_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_postal_code; text="Postal/Zip Code"; ctl_type="editbox"; tooltip="zip code or postal code"; }
                    p_country_code_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_country_code; text="Country"; lookup_width=305; ctl_type="editbox"; tooltip="Use ISO codes same as domain names"; }
                    }
                third_vbox "widget/vbox"
                    {
                    width=200;height=175;
                    column_width=210;
                    cellsize=20; spacing=5;
                    x=425;y=1;
                    p_partner_key_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_partner_key; text="Partner Key"; ctl_type="editbox"; tooltip="Partner Key"; }
                    p_partner_class_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_partner_class; text="Partner Type"; lookup_width=305; tooltip=""; ctl_type="dropdown"; sql="select :text, :tag from /apps/kardia/data/Kardia_DB/_p_partner_class/rows";}
                    //p_location_type_cmp "widget/component" { type="readonly"; path="/apps/kardia/modules/base/fields/p_location_type.cmp"; field=p_location_type; text="Location Type"; tooltip="H=home, W=work, S=school, V=vacation"; }
                    p_legacy_key_1_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_legacy_key_1; text="Legacy Key"; ctl_type="editbox"; tooltip="Legacy Key 1 - Donor ID"; }
                    p_legacy_key_2_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_legacy_key_2; text="Legacy Key 2"; ctl_type="editbox"; tooltip="Legacy Key 2 - Sort Code"; }
                    p_title_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_title; text="Title"; ctl_type="editbox"; tooltip="The Partners Title"; }
                    //p_partner_class_cmp "widget/component" { type="readonly"; path="/apps/kardia/modules/base/fields/p_partner_class.cmp"; field=p_partner_class; text="Select type"; lookup_width=305; tooltip=""; }
                    p_location_type_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_location_type; text="Location Type"; tooltip="H=home, W=work, S=school, V=vacation"; ctl_type="dropdown"; sql="select :text, :tag from /apps/kardia/data/Kardia_DB/_p_location_type/rows";}
                    p_location_id_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_location_id; text="Location ID"; ctl_type="editbox"; tooltip="unique to this partner location ID"; }
                    }
                query_button "widget/textbutton"
                    {
                    x=525; y=188;
                    height=24; width=100;
                    text="New Search";
		    enabled=runclient(:partner_search_form:is_queryable);
                    cnQueryExec "widget/connector" 
                        { 
                        event="Click"; 
                        target="partner_search_form"; 
                        action="Query"; 
                        }
                    }
                queryExec_button "widget/textbutton"
                    {
                    x=525; y=217;
                    height=24; width=100;
                    text="Do Search";
		    enabled=runclient(:partner_search_form:is_queryexecutable);
                    cnQuery "widget/connector" 
                        {
                        event="Click"; 
                        target="partner_search_form"; 
                        action="QueryExec"; 
                        }
                    }
                GotoButton "widget/textbutton"
                    {
                    x=525; y=246;
                    height=24; width=100;
                    text="Select";
		    enabled=runclient(:partner_search_form:is_editable);
                    cnGoButton "widget/connector" 
                        {
                        event="Click"; 
                        target="partner_search_component"; 
                        action="PartnerSelected"; 
			partner_key = runclient(:partner_search_form:p_partner_key);
                        }
                    cnGoButtonClose "widget/connector" 
                        {
                        event="Click"; 
                        target="partner_search_component"; 
                        action="CloseMe"; 
                        }
                    }
                }
            }
            scroll_pane "widget/pane"
                {
                width=688;height=130;
                x=4;y=304;
		widget_class = "table_bgnd";
                p_search_table "widget/table"
                    {
                    x=0;y=0;
                    height=128;
                    width=686;
                    mode=dynamicrow;
                    rowheight = 20;

		    cnPartnerSelected "widget/connector" 
		        { 
			event=DblClick;
                        target="partner_search_component"; 
                        action="PartnerSelected"; 
			partner_key = runclient(:partner_search_form:p_partner_key);
			}
		    cnPartnerSelectedClose "widget/connector" 
		        { 
			event=DblClick;
                        target="partner_search_component"; 
                        action="CloseMe"; 
			}
                    table_firstname "widget/table-column"
                        {
                        title = "First Name";
                        fieldname = p_given_name;
                        }
                    table_lastname "widget/table-column"
                        {
                        title = "Last Name";
                        fieldname = p_surname;
                        }
                    table_address1 "widget/table-column"
		        {
			title = "Address 1";
			fieldname = p_address_1;
			}
                    table_address2 "widget/table-column"
		        {
			title = "Address 2";
			fieldname = p_address_2;
			}
                    table_address3 "widget/table-column"
		        {
			title = "Address 3";
			fieldname = p_address_3;
			}
                    table_city "widget/table-column"
		        {
			title = "City";
			fieldname = p_city;
			}
                    table_state "widget/table-column"
		        {
			title = "State";
			fieldname = p_state_province;
			}
                    table_zip "widget/table-column"
		        {
			title = "Zip/Postal";
			fieldname = p_postal_code;
			}
                    table_legacy1 "widget/table-column"
		        {
			title = "Legacy 1";
			fieldname = p_legacy_key_1;
			}
                    table_legacy2 "widget/table-column"
		        {
			title = "Legacy 2";
			fieldname = p_legacy_key_2;
			}
                    }
                }
            }
        }
    }
