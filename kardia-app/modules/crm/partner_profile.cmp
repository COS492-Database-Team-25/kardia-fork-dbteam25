$Version=2$
partner_profile "widget/component-decl"
    {
    width=700;
    height=580;

    profile_osrc "widget/osrc"
	{
	sql = "	select
		    :p:p_partner_key,
		    :p:p_surname,
		    :p:p_given_name,
		    :p:p_org_name,
		    :l:p_city,
		    :l:p_state_province,
		    contact_data = sum(:ct:text + ': ' + isnull('+' + :c:p_phone_country + ' ', '') + isnull(:c:p_phone_area_city + ' ', '') + isnull(:c:p_contact_data,'') + '\n') - '\n'
		from
		    /apps/kardia/data/Kardia_DB/p_partner/rows p,
		    /apps/kardia/data/Kardia_DB/p_location/rows l,
		    /apps/kardia/data/Kardia_DB/p_contact_info/rows c,
		    /apps/kardia/data/Kardia_DB/_p_contact_type/rows ct
		where
		    :p:p_partner_key = '100639' and
		    :p:p_record_status_code = 'A' and
		    :l:p_partner_key =* :p:p_partner_key and
		    :l:p_revision_id = 0 and
		    :l:p_record_status_code = 'A' and
		    :c:p_partner_key =* :p:p_partner_key and
		    :c:p_record_status_code = 'A' and
		    :ct:tag = :c:p_contact_type
		limit
		    1
		";
	autoquery = onload;
	replicasize = 2;
	readahead = 2;

	load_tracks "widget/connector" { event=EndQuery; target=profile_tracks; action=Instantiate; partner_key=runclient(:profile_osrc:p_partner_key); }

	profile_vbox "widget/vbox"
	    {
	    x=0; y=0;
	    width=700; height=580;
	    spacing=8;

	    profile_hdr_hbox "widget/hbox"
		{
		height=110;
		spacing=8;

		profile_photo "widget/component"
		    {
		    width=104;
		    fl_height=0;
		    fl_width=0;
		    path="profile_picture.cmp";
		    }

		profile_info "widget/component"
		    {
		    width=380;
		    fl_width=10;
		    fl_height=0;
		    path="profile_info.cmp";
		    }

		profile_tracks "widget/component"
		    {
		    fl_height=0;
		    fl_width=0;
		    width=200;
		    height=110;
		    path="profile_track_list.cmp";
		    }
		}

	    profile_sep "widget/pane" { height=2; style=lowered; }

	    profile_body_hbox "widget/hbox"
		{
		height=450;
		spacing=8;

		profile_data_vbox "widget/vbox"
		    {
		    fl_width=5;
		    width=250;
		    spacing=8;

		    profile_data_todo_pane "widget/pane"
			{
			condition=0;
			height=221;
			style=raised;
			border_radius=8;
			background="/apps/kardia/images/bg/light_bgnd2.jpg";
			}

		    profile_data_hilite_pane "widget/pane"
			{
			height=450;
			style=raised;
			border_radius=8;
			background="/apps/kardia/images/bg/light_bgnd2.jpg";

			profile_data_hilite_vbox "widget/vbox"
			    {
			    x=4; y=4; width=240; height=440;
			    spacing=8;

			    hilite_hdr "widget/label"
				{
				height=16;
				align=center;
				style=bold;
				text="Highlights...";
				}
			    }
			}
		    }

		profile_timeline "widget/component"
		    {
		    width=442;
		    path="profile_timeline.cmp";
		    }
		}
	    }
	}
    }
