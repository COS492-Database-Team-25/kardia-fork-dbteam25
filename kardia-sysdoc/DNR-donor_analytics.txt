Document:   Notes on Donor Analytics Project
Author:	    David Stirn (DMS) and Zachary Allen (ZSA)
Date:	    26-Jul-2021
-------------------------------------------------------------------------------
Overview of the project:
This project is meant to be able to give missionaries using Kardia updates on what is happening with their donors. 
For example, if a donor hasn't given in a few months for no reason, we want the missionary to know, so we have this.
The main file is the update_descriptives_new.qy file, found in kardia-app/modules/rcpt
It first clears out old descriptives
It then makes a working copy of the data
Then it generates all the descriptives
You can see a description of the a_descriptives_hist table on this website https://www.codn.net/projects/kardia/wiki/index.php/Kardia:NewTables_a_descriptives_hist
Then the merges execute
It first merges catchups, then adjacent giving segments, then catchup gifts that have extras as well, then extras, then adjacent giving segments again, then adjacent single gifts, then adjacent giving segments twice, then approximate values for everything that doesn't fit in
It then corrects issues with the prev_end and next_start fields that arose due to the merges
Then it corrects the Next to Last tracking issues
Then it adjusts the calculations for the averages
It then updates whether or not the donation is current, lapsing, or already lapsed
It then calculates increases and decreases in giving
Then it returns the data to the user




